---
name: git-commit
description: Use when the user asks to commit git changes, create a commit, or save code changes. Creates well-formatted conventional commits with Chinese descriptions.
---

# Git 提交技能

帮助用户创建规范的 git commit，自动生成提交信息并执行提交操作。

## 工作流程

### 1. 检查 Git 状态
并行执行以下命令获取完整上下文：
```bash
git status           # 查看所有变更文件
git diff --stat      # 查看变更统计
git log -3 --oneline # 查看最近 3 次提交记录（学习提交风格）
```

### 2. 分析变更内容
根据变更文件自动识别：
- **变更类型**：新增功能、增强功能、修复 bug、重构、文档、测试等
- **影响范围**：单个文件、多个文件、整个模块
- **核心变更**：主要修改了什么

### 3. 生成提交信息
遵循 **Conventional Commits** 规范：

```
<type>: <简短描述>

<详细说明（可选）>
- 变更点 1
- 变更点 2
```

**常用 type：**
- `feat`: 新功能
- `fix`: 修复 bug
- `docs`: 文档更改
- `refactor`: 代码重构
- `perf`: 性能优化
- `test`: 测试相关
- `chore`: 构建/工具相关
- `style`: 代码格式（不影响功能）

### 4. 执行提交
使用 HEREDOC 格式确保多行提交信息正确：
```bash
git add . && git commit -m "$(cat <<'EOF'
<提交信息>
EOF
)"
```

## 提交信息原则

1. **简短描述**（第一行）
   - 50 字符内
   - 动词开头（添加、修复、更新、重构）
   - 说明"做了什么"而非"为什么"

2. **详细说明**（可选）
   - 换行后添加
   - 列举主要变更点
   - 技术细节或背景说明

3. **中文提交**
   - 使用中文描述更自然清晰
   - 技术术语保留英文
   - 文件路径保留原样

## 示例

### 示例 1：单功能更新
```
更新翻译技能工作流程和性能优化建议

- 增加并行处理策略（小/中/大型任务）
- 补充 Task 提示词模板
- 扩展术语表（Session、State、RAG 等）
```

### 示例 2：批量翻译
```
翻译 02_agents 目录所有文件为中文

- 翻译所有 .py 文件的注释和 docstring
- 翻译所有 .md 文件内容
- 保留技术术语英文（Agent、Workflow 等）
```

### 示例 3：功能增强
```
feat: 支持多模态输入处理

- 添加图像处理模块
- 集成音频转文字功能
- 更新文档示例
```

## 注意事项

1. **提交前检查**
   - 确认所有文件都需要提交
   - 避免提交临时文件、日志文件
   - 检查是否有敏感信息（API key 等）

2. **提交粒度**
   - 一次提交对应一个逻辑变更
   - 避免混合多个不相关的改动
   - 大型改动考虑拆分多次提交

3. **学习项目风格**
   - 查看 `git log` 学习项目提交习惯
   - 保持与项目现有风格一致
   - 中英文风格跟随项目惯例

4. **HEREDOC 格式**
   - 多行提交信息必须用 HEREDOC
   - 使用 `'EOF'` 避免变量展开
   - 确保缩进和格式正确
